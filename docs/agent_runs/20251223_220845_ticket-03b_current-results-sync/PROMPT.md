You are a coding agent operating in the `quant-pricer-cpp` repository.

BEGIN by reading these files (in order):
- AGENTS.md
- docs/PLAN_OF_RECORD.md
- docs/DOCS_AND_LOGGING_SYSTEM.md
- docs/CODEX_SPRINT_TICKETS.md

Ticket: ticket-03b — Sync CURRENT_RESULTS + run-log/meta integrity guardrails

Stop-the-line (non-negotiable):
- Do NOT fabricate results or claim commands ran if they did not (log everything).
- Do NOT commit raw WRDS/OptionMetrics data or leak credentials into logs.
- Do NOT weaken evaluation validity (no silent protocol changes).
- Follow DOCS_AND_LOGGING_SYSTEM.md: create a complete run log folder.

Goal (1 sentence):
Eliminate documentation drift by syncing project_state/CURRENT_RESULTS.md to the current committed artifacts/metrics, and add guardrails so run metadata + CURRENT_RESULTS can’t silently go stale.

Acceptance criteria (must satisfy all):
1) project_state/CURRENT_RESULTS.md matches the current committed docs/artifacts/metrics_summary.* at HEAD:
   - the snapshot timestamp and manifest SHA align with metrics_summary
   - headline values (at least QMC vs PRNG ratio + benchmarks + WRDS median iv_rmse) match exactly
2) Run log metadata integrity is enforced:
   - Either: correct the prior ticket-03 META.json git_sha_after (and document that correction in RESULTS.md + PROGRESS.md), OR
   - Add a guard script/test that fails if docs/agent_runs/*/META.json git_sha_after is missing/invalid relative to repo commit history when bundling.
3) Add a FAST guardrail that fails if CURRENT_RESULTS drifts from metrics_summary (preferred), or document a minimal manual invariant + make it part of the ticket checklist.

Required workflow (do NOT write a long upfront plan):
1) Create a new run log folder:
   - RUN_NAME="$(date -u +%Y%m%d_%H%M%S)_ticket-03b_current-results-sync"
   - RUN_DIR="docs/agent_runs/${RUN_NAME}"
   - Create: PROMPT.md, COMMANDS.md, RESULTS.md, TESTS.md, META.json (and SOURCES.md only if web research used).
   - Put this entire prompt text into PROMPT.md.
   - Start COMMANDS.md immediately and append every command you run (verbatim).

2) Inspect the current state:
   - Open and compare:
     - docs/artifacts/metrics_summary.md and docs/artifacts/metrics_summary.json
     - docs/artifacts/manifest.json
     - project_state/CURRENT_RESULTS.md
   - Identify exactly what fields/values are stale in CURRENT_RESULTS.

3) Implement the fix:
   A) Sync CURRENT_RESULTS:
     - Update project_state/CURRENT_RESULTS.md so its “Metrics snapshot” and “Highlight metrics” sections match metrics_summary.*
     - Ensure it references the correct artifact paths.
     - If CURRENT_RESULTS is generated by a script, use that script and record the command in COMMANDS.md.
   B) Meta integrity:
     - Decide one of:
       - (Preferred) Add a lightweight check (python) under scripts/ or tools/ that validates:
         * CURRENT_RESULTS matches metrics_summary
         * META.json git_sha_after exists and looks consistent (at minimum: non-empty and equals `git rev-parse HEAD` at end of run)
       - Or minimally: correct the known-bad META.json from ticket-03 (set git_sha_after to the actual commit) and explicitly record that correction in RESULTS.md.

4) Run minimal sufficient tests (log in TESTS.md with outcomes + key snippets):
   - Build + FAST:
     - cmake -S . -B build -DCMAKE_BUILD_TYPE=Release
     - cmake --build build -j
     - ctest --test-dir build -L FAST --output-on-failure
   - WRDS sample smoke (still required because this touches WRDS-facing provenance/docs):
     - WRDS_USE_SAMPLE=1 python3 -m wrds_pipeline.pipeline --fast
   - If you add a new check script/test, run it explicitly and include output.

5) Docs updates (required):
   - PROGRESS.md: add a dated entry summarizing:
     - what changed (CURRENT_RESULTS sync + guardrails)
     - exact tests/commands run
     - what invariant is now enforced
   - docs/CODEX_SPRINT_TICKETS.md:
     - mark ticket-03 as FAIL with the reason (if not already)
     - add ticket-03b (this ticket) so `make gpt-bundle` recognizes it

6) Commit on a feature branch:
   - git switch -c codex/ticket-03b-current-results-sync
   - Commit message: ticket-03b: sync CURRENT_RESULTS + guard meta integrity
   - Commit body must include:
     - Tests: <exact commands>
     - Artifacts: <paths updated or 'none'>
     - Run log: docs/agent_runs/${RUN_NAME}/

7) Generate the next review bundle at the end (and record the bundle path in RESULTS.md):
   - make gpt-bundle TICKET=ticket-03b RUN_NAME=${RUN_NAME}

Suggested Codex invocation (safe mode; approvals on):
- codex --profile safe

If you think full autonomy is needed, STOP — do not use it unless the human explicitly requests it.

Human merge checklist (append to RESULTS.md):
- CURRENT_RESULTS matches metrics_summary values and timestamp at HEAD
- Any new guardrail test is wired into FAST and is deterministic
- WRDS sample smoke ran (WRDS_USE_SAMPLE=1 ... --fast)
- No raw WRDS/OptionMetrics data or credentials in diffs/logs
- PROGRESS.md updated; sprint tickets updated; bundle generated and contains non-empty run logs
